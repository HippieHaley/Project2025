<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Income Calculator</title>
    <style>
    /* Basic Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
     /* General Body Style */
body {
         font-family: Arial, sans-serif;
         flex: 1;
         justify-content: center;
         max-width: 1000px;
         margin: 0 auto;
         background-color: #acdbf9; /* Light blue background */
         color: #333;
         padding-top: 50px;
     } 
           /* Container Flex Layout */
.container {
         flex-direction: row;
         display: flex;
         gap: 20px;
         margin: 20px 0;
     }
           /* Column Style */
           .column {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 20px;
}
.section {
      justify-content: center;
      padding: 20px;
      border: 2px solid #333;
      box-sizing: border-box;
      background-color: #acdbf9; /* Light blue background */
      border-radius: 30px; /* Rounded edges */
    }
    .heart {
  height: 30px;
  width: auto
}
 .label{
      margin-top: 30px;
   margin-bottom: 10px;
    align-items: center; /* Centers text vertically */
  }
   .example {
    margin-top: 15px;
   align-items: center; /* Centers text vertically */
     }
      .space {
     margin-top: 8px;
     align-items: center; /* Centers text vertically */
      }
      /* Position & size for the copy button in top-right corner */
.back-home {
      display: inline-block;  
      padding: 10px 20px;
      background-color: #f8c9f9; 
      color: #333;
      text-decoration: none;
      font-size: 1rem;
      font-weight: bold;
      border-radius: 30px;
      text-align: center;
      border: 1px solid #000;
      position: absolute; 
      top: 20px;
      left: 20px;
    }
    .back-home:hover {
      background-color: #e8b3e8;
    }
    .button {
  display: inline-flex;
  position: fixed-bottom;
  justify-content: center;
  background-color: #f8c9f9; /* Pink background */
  color: #333;              /* Text/icon color */
  font-size: 1rem;
  font-weight: bold;
  border: 1px solid #000;   /* Black border */
  border-radius: 50%;       /* Circle shape */
  cursor: pointer;
  /* The padding ensures the icon has some space. 
     Adjust to your preference. */
  padding: 0.5rem;
}
.button:hover {
  background-color: #e8b8e8; /* Slightly darker pink */
}

.toggle-notes-button {
  margin-left: 10px;
  padding: 6px 12px;
  border-radius: 10px;
  border: 2px solid #f8c9f9; /* Soft pink border */
      border-radius: 30px; /* Rounded edges */
      background-color: #f8c9f9; /* Soft pink background */
}

#toggleNotes:hover {
  background-color: #e8b8e8;  /* Slightly darker pink on hover */
}

    input[type="number"] {
      width: 100%;
      max-width: 300px;
      padding: 10px 15px;
      margin: 10px 0;
      border: 2px solid #f8c9f9; /* Soft pink border */
      border-radius: 30px; /* Rounded edges */
      background-color: #f8c9f9; /* Soft pink background */
      color: #333;
      font-size: 1rem;
      outline: none;
      transition: 0.3s ease;
      justify-content: center;
    }
    input[type="number"]:hover {
      background-color: #f0d4f0; /* Slightly lighter pink */
    }
    input[type="number"]:focus {
      border-color: #e8b8e8;
      background-color: #fff;
      box-shadow: 0 0 5px rgba(232, 184, 232, 0.5);
      justify-content: center;
    }
     /* Grand Total Section Styling */
     .grand-total-section {
      background-color: #acdbf9;
      border: 2px solid #333;
      align-items: center; /* Centers text vertically */
      justify-content: center; /* Centers text horizontally */
    }
    /* Household Information Lookup Section */
    .lookup-section {
      padding: 15px;
      background-color: #acdbf9;
      border-radius: 30px; /* Rounded edges */
      flex-grow: 1; /* Makes all boxes equal height */
      align-items: center; /* Centers text vertically */
      border: 2px solid #333;
    }
    input[type="text"] {
  width: 100%;
  max-width: 300px;
  padding: 10px 15px;
  margin: 10px 0;
  border: 2px solid #f8c9f9;
  border-radius: 30px;
  background-color: #f8c9f9;
  color: #333;
  font-size: 1rem;
  outline: none;
  transition: 0.3s ease;
}
input[type="text"]:hover {
  background-color: #f0d4f0;
}
input[type="text"]:focus {
  border-color: #e8b8e8;
  background-color: #fff;
  box-shadow: 0 0 5px rgba(232, 184, 232, 0.5);
}
/* Style for ALL select dropdowns */
select {
  width: 100%;
  max-width: 300px;
  padding: 10px 15px;
  margin: 10px 0;
  border: 2px solid #f8c9f9; /* Soft pink border */
  border-radius: 30px; /* Rounded edges */
  background-color: #f8c9f9; /* Soft pink background */
  color: #333;
  font-size: 1rem;
  outline: none;
  transition: 0.3s ease;
}

/* Hover effect for selects */
select:hover {
  background-color: #f0d4f0; /* Slightly lighter pink */
}

/* Focus effect for selects */
select:focus {
  border-color: #e8b8e8;
  background-color: #fff;
  box-shadow: 0 0 5px rgba(232, 184, 232, 0.5);
}

.icon-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 40px;
  height: 40px;
  /* If you want the icon centered, keep display:flex, etc. 
     But you can rely on .button's inline-flex if you prefer. */
}
   /* Trigger Buttons */
   .modal-trigger {
      cursor: pointer;
      font-size: 18px;
      border-radius: 4px;
      padding: 0 5px;
      margin-left: 5px;
      display: inline-block;
    }
    /* Modal Overlay (common style for both modals) */
    .modal-overlay {
      display: none; /* Hidden by default */
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 9000; /* Above most content */
      justify-content: center;
      align-items: center;
    }
    /* Modal Window */
    .modal {
      background-color: #fff;
      padding: 10px;
      width: 100%;
      max-width: 1000px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    /* Table Styling for Modal Content */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
    }
    th {
      background-color: #f2f2f2;
    }
    .hidden {
      visibility: hidden;
    }
    #notesContainer {
  position: absolute;
  top: 120px;      /* Adjust to align with top of your form */
  right: 40px;     /* Adjust spacing from right side */
  width: 300px;
  display: none;
  padding: 15px;
  background-color: #f8c9f9;
  border: 2px solid #000;
  border-radius: 20px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

#notesContainer textarea {
  width: 100%;
  border-radius: 10px;
  padding: 10px;
  border: 1px solid #ccc;
  resize: vertical;
  background-color: #ffffff;
  color: #333;
}
  </style>
</head>
<body>
    <a href="index.html" class="back-home">Back to Home</a>
    <h1>Income Calculator</h1>
    <div style="margin: 20px 0;">
      <label for="incomeType"><strong>Income Type:</strong></label>
      <select id="incomeType" style="padding: 6px 10px; border-radius: 10px; margin-left: 10px;">
        <option value="" selected disabled hidden>Select one...</option>
        <option value="W2">W2</option>
        <option value="Paycheck">Paycheck</option>
        <option value="NEED INCOME DOCS">NEED INCOME DOCS-VERBAL INCOME</option>
      </select>
      <label for="workingAt" style="margin-left: 20px;">Working @</label>
<input type="text" id="workingAt" placeholder="Where?" style="padding: 8px; border-radius: 10px; border: 1px solid #f8c9f9;" />
<button style="padding: 8px; border-radius: 10px;  width: 130px;
height: 40px;
border: 2px solid #f8c9f9;
border-radius: 30px; /* Rounded edges */
background-color: #f8c9f9; /* Soft pink background */" class="toggleNotes">+ Add Notes</button>
    </div>      
    <div class="container">
      <!-- Column 1: Biweekly and Weekly Income Sections -->
      <div class="column">
        <div class="section">
          <h2>Biweekly Income</h2>
          <div class="example"></div>
          <p>Example: Every other Friday</p>
          <div class="example"></div>
          <label>Paystub one: $<input type="number" id="paystub1" value="0" onchange="calculateIncome('biweekly')"></label><br>
          <div class="space"></div>
          <label>Paystub two: $<input type="number" id="paystub2" value="0" onchange="calculateIncome('biweekly')"></label><br>
            <div class=" hidden"><p>Total: $<span id="biweeklyTotal">0</span></p></div>
          <p>Average: $<span id="biweeklyAverage">0</span></p>
          <div class="space"></div>
          <p>Annual: $<span id="biweeklyAnnual">0</span></p>
        </div>
        <div class="section">
          <h2>Weekly Income</h2>
          <div class="example"></div>
          <p>Example: Every Friday</p>
          <div class="example"></div>
          <label>Paystub one: $<input type="number" id="weeklyPaystub1" value="0" onchange="calculateIncome('weekly')"></label><br>
          <div class="space"></div>
          <label>Paystub two: $<input type="number" id="weeklyPaystub2" value="0" onchange="calculateIncome('weekly')"></label><br>
          <div class=" hidden">
            <p>Total: $<span id="weeklyTotal">0</span></p></div>
          <p>Average: $<span id="weeklyAverage">0</span></p>
          <div class="space"></div>
          <p>Annual: $<span id="weeklyAnnual">0</span></p>
        </div>
      </div>
      <!-- Column 2: Twice a Month and Weekly Verbal Income Sections -->
      <div class="column">
        <div class="section">
          <h2>Twice a Month Income</h2>
          <div class="example"></div>
          <p>Example: 1st and 15th</p>
          <div class="example"></div>
          <label>Paystub one: $<input type="number" id="twiceMonthPaystub1" value="0" onchange="calculateIncome('twiceMonth')"></label><br>
          <div class="space"></div>
          <label>Paystub two: $<input type="number" id="twiceMonthPaystub2" value="0" onchange="calculateIncome('twiceMonth')"></label><br>
          <div class=" hidden">
            <p>Total: $<span id="twiceMonthTotal">0</span></p></div>
          <p>Average: $<span id="twiceMonthAverage">0</span></p>
          <div class="space"></div>
          <p>Annual: $<span id="twiceMonthAnnual">0</span></p>
        </div>
        <div class="section">
          <h2>Weekly Verbal Income</h2>
          <div class="example"></div>
          <p> Example: Freelance or hourly work</p>
          <div class="example"></div>
          <label>Hours worked: <input type="number" id="verbalHours" value="0" onchange="calculateIncome('verbal')"></label><br>
          <div class="space"></div>
          <label>Hourly Pay: $<input type="number" id="verbalRate" value="0" onchange="calculateIncome('verbal')"></label><br>
          <div class=" hidden"><p>Total: $<span id="verbalTotal">0</span></p></div>
          <p>Average: $<span id="verbalAverage">0</span></p>
          <div class="space"></div>
          <p>Annual: $<span id="verbalAnnual">0</span></p>
        </div>
      </div>
      <!-- Column 3: Grand Total and Household Information Section -->
      <div class="column">
        <div class="section">
          <h2>Extra Income Sources</h2>
          <div class="example"></div>
          <label>Tips per week: $<input type="number" id="AnnualTips" value="0" onchange="calculateGrandTotal()"></label><br>
          <div class="space"></div>
          <label>Other Income per month: $<input type="number" id="AnnualOtherMonthly" value="0" onchange="calculateGrandTotal()"></label><br>
          <div class="space"></div>
          <label>Other Income by year: $<input type="number" id="OtherAnnual" value="0" onchange="calculateGrandTotal()"></label><br>
          <div class="space"></div>
        </div>
        <div class="section">
        <h2>Household Info</h2>
      <div class="example"></div>
          <p> People per Household:</p>
           <input type="number" id="householdSize" min="1" value="1" onchange="updateHouseholdIncome()"><br>
           <div class=" hidden"><p>spacing fix</p></div>
          <class="lookup-section" style="position: relative;">
            <button class="button icon-button" onclick="copyIncomeInfo()" aria-label="Copy Household Info">
              <!-- Inli</button>ne SVG icon for 'copy' -->
              <svg width="24" height="24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
            </button>
 <div class="example"></div>
      <h2> Household Income</h2>
      <div class="example"></div>
          <p><strong>Total Income: $<span id="grandTotal">0</span></strong></p>
          <div class="space"></div>
          <p><strong>Client Pay: <span id="coverageLevel">N/A</span></strong>
            <span class="modal-trigger" id="triggerModal1">
              <img src="images/heart.png" class="heart" alt="Heart icon">
            </span>
              <div class="modal-overlay" id="modalOverlay1">
               <div class="modal">
                <table>
                  <thead>
                    <tr>
                      <th>Family Size</th>
                      <th>0% Patient Pay</th>
                      <th>25% Patient Pay</th>
                      <th>50% Patient Pay</th>
                      <th>75% Patient Pay</th>
                      <th>100% Patient Pay</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Row 1 -->
                    <tr>
                      <td>1</td>
                      <td>15,650</td>
                      <td>15,651 - 23,474</td>
                      <td>23,475 - 31,299</td>
                      <td>31,300 - 39,124</td>
                      <td>39,125</td>
                    </tr>
                    <!-- Row 2 -->
                    <tr>
                      <td>2</td>
                      <td>21,650</td>
                      <td>21,651 - 31,724</td>
                      <td>31,725 - 41,299</td>
                      <td>41,300 - 52,874</td>
                      <td>52,875</td>
                    </tr>
                    <!-- Row 3 -->
                    <tr>
                      <td>3</td>
                      <td>26,650</td>
                      <td>26,651 - 39,374</td>
                      <td>39,375 - 52,249</td>
                      <td>52,250 - 66,624</td>
                      <td>66,625</td>
                    </tr>
                    <!-- Row 4 -->
                    <tr>
                      <td>4</td>
                      <td>32,150</td>
                      <td>32,151 - 48,224</td>
                      <td>48,225 - 64,299</td>
                      <td>64,300 - 80,374</td>
                      <td>80,375</td>
                    </tr>
                    <!-- Row 5 -->
                    <tr>
                      <td>5</td>
                      <td>37,650</td>
                      <td>37,651 - 56,874</td>
                      <td>56,875 - 72,999</td>
                      <td>73,000 - 94,124</td>
                      <td>94,125</td>
                    </tr>
                    <!-- Row 6 -->
                    <tr>
                      <td>6</td>
                      <td>43,150</td>
                      <td>43,151 - 65,524</td>
                      <td>65,525 - 87,499</td>
                      <td>87,500 - 107,874</td>
                      <td>107,875</td>
                    </tr>
                    <!-- Row 7 -->
                    <tr>
                      <td>7</td>
                      <td>48,650</td>
                      <td>48,651 - 74,174</td>
                      <td>74,175 - 99,499</td>
                      <td>99,500 - 121,624</td>
                      <td>121,625</td>
                    </tr>
                    <!-- Row 8 -->
                    <tr>
                      <td>8</td>
                      <td>54,150</td>
                      <td>54,151 - 82,824</td>
                      <td>82,825 - 111,499</td>
                      <td>111,500 - 135,374</td>
                      <td>135,375</td>
                    </tr>
                    <!-- Row 9 -->
                    <tr>
                      <td>9</td>
                      <td>59,650</td>
                      <td>59,651 - 91,474</td>
                      <td>91,475 - 123,499</td>
                      <td>123,500 - 149,124</td>
                      <td>149,125</td>
                    </tr>
                    <!-- Row 10 -->
                    <tr>
                      <td>10</td>
                      <td>70,650</td>
                      <td>70,651 - 97,724</td>
                      <td>97,725 - 129,799</td>
                      <td>129,800 - 162,874</td>
                      <td>162,875</td>
                    </tr>
                    <!-- Row 11 -->
                    <tr>
                      <td>11</td>
                      <td>76,650</td>
                      <td>76,651 - 114,224</td>
                      <td>114,225 - 151,799</td>
                      <td>151,800 - 176,624</td>
                      <td>176,625</td>
                    </tr>
                    <!-- Row 12 -->
                    <tr>
                      <td>12</td>
                      <td>82,150</td>
                      <td>82,151 - 122,874</td>
                      <td>122,875 - 163,299</td>
                      <td>163,300 - 190,374</td>
                      <td>190,375</td>
                    </tr>
                    <!-- Row 13 -->
                    <tr>
                      <td>13</td>
                      <td>87,650</td>
                      <td>87,651 - 130,524</td>
                      <td>130,525 - 174,799</td>
                      <td>174,800 - 204,124</td>
                      <td>204,125</td>
                    </tr>
                    <!-- Row 14 -->
                    <tr>
                      <td>14</td>
                      <td>92,650</td>
                      <td>92,651 - 138,974</td>
                      <td>138,975 - 185,299</td>
                      <td>185,300 - 217,874</td>
                      <td>217,875</td>
                    </tr>
                    <!-- Row 15 -->
                    <tr>
                      <td>15</td>
                      <td>96,650</td>
                      <td>96,651 - 147,374</td>
                      <td>147,375 - 195,999</td>
                      <td>196,000 - 231,624</td>
                      <td>231,625</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="space"></div>
            <p><strong>AWC! qualification: <span id="awcQualification">N/A</span></strong>
              <span class="modal-trigger" id="triggerModal2">
                <img src="images/heart.png" class="heart" alt="Heart icon">
              </span>              
              <div class="modal-overlay" id="modalOverlay2">
                <div class="modal">
                  <h2>AWC! Program Eligibility</h2>
                  <table>
                    <thead>
                      <tr>
                        <th>Family Size</th>
                        <th>Max Annual Income</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr><td>1</td><td>$39,125</td></tr>
                      <tr><td>2</td><td>$52,875</td></tr>
                      <tr><td>3</td><td>$66,625</td></tr>
                      <tr><td>4</td><td>$80,375</td></tr>
                      <tr><td>5</td><td>$94,125</td></tr>
                      <tr><td>6</td><td>$107,875</td></tr>
                      <tr><td>7</td><td>$121,625</td></tr>
                      <tr><td>8</td><td>$135,375</td></tr>
                      <tr><td>9</td><td>$149,125</td></tr>
                      <tr><td>10</td><td>$162,875</td></tr>
                      <tr><td>11</td><td>$176,625</td></tr>
                      <tr><td>12</td><td>$190,375</td></tr>
                      <tr><td>13</td><td>$204,125</td></tr>
                      <tr><td>14</td><td>$217,875</td></tr>
                      <tr><td>15</td><td>$231,625</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
      </div>
    </div>
    <div class=" space"></div>
    </div>  
  <div id="householdMembersSection" class="section" style="margin-top: 20px;">
      <h2>Other Household Members</h2>
      <div id="householdMembersContainer"></div></div>
      <div id="notesContainer">
        <label for="userNotes">Notes:</label><br>
        <textarea id="userNotes" placeholder="Enter any additional notes..." rows="8"></textarea>
      </div>      
  <script>
    /***************************************************
     * 1) Coverage Chart & Coverage Level Logic
     ***************************************************/
    const coverageChart = {
      1: [15650, 23474, 31300, 39124, 39125],
      2: [21150, 31724, 42299, 52874, 52875],
      3: [26650, 39974, 53299, 66624, 66625],
      4: [32150, 48224, 64299, 80374, 80375],
      5: [37650, 56474, 75299, 94124, 94125],
      6: [43150, 64724, 86299, 107874, 107875],
      7: [48650, 72974, 97299, 121624, 121625],
      8: [54150, 81224, 108299, 135374, 135375],
      9: [59650, 89474, 119299, 149124, 149125],
      10: [65150, 97724, 130299, 162874, 162875],
      11: [70650, 105974, 141299, 176624, 176625],
      12: [76150, 114224, 152299, 190374, 190375],
      13: [81650, 122474, 163299, 204124, 204125],
      14: [87150, 130724, 174299, 217874, 217875],
      15: [92650, 138974, 185299, 231624, 231625]
    };
    const coverageLevels = ["0%", "25%", "50%", "75%", "100%"];
    function determineCoverageLevel(householdSize, yearlyIncome) {
      if (!coverageChart[householdSize]) {
        return "N/A";
      }
      const incomeBrackets = coverageChart[householdSize];
      for (let i = 0; i < incomeBrackets.length; i++) {
        if (yearlyIncome <= incomeBrackets[i]) {
          return coverageLevels[i];
        }
      }
      return "100%";
    }
    /***************************************************
     * 2) AWC! Qualification Logic
     ***************************************************/
    const awcChart = {
      1: 39125,
      2: 52875,
      3: 66625,
      4: 80375,
      5: 94125,
      6: 107875,
      7: 121625,
      8: 135375,
      9: 149125,
      10: 162875,
      11: 176625,
      12: 190375,
      13: 204125,
      14: 217875,
      15: 231625
    };
    function determineAWCQualification(householdSize, yearlyIncome) {
      if (!awcChart[householdSize]) {
        return "N/A";
      }
      return (yearlyIncome <= awcChart[householdSize]) ? "Yes" : "No";
    }
    /***************************************************
     * 3) Income Calculations (biweekly, weekly, etc.)
     ***************************************************/
    function calculateIncome(type) {
      let paystub1, paystub2, verbalHours, verbalRate, total, average, annual;
      switch (type) {
        case 'biweekly':
          paystub1 = parseFloat(document.getElementById('paystub1').value) || 0;
          paystub2 = parseFloat(document.getElementById('paystub2').value) || 0;
          total = paystub1 + paystub2;
          average = total / 2;
          annual = average * 26;
          break;
        case 'weekly':
          paystub1 = parseFloat(document.getElementById('weeklyPaystub1').value) || 0;
          paystub2 = parseFloat(document.getElementById('weeklyPaystub2').value) || 0;
          total = paystub1 + paystub2;
          average = total / 2;
          annual = average * 52;
          break;
        case 'twiceMonth':
          paystub1 = parseFloat(document.getElementById('twiceMonthPaystub1').value) || 0;
          paystub2 = parseFloat(document.getElementById('twiceMonthPaystub2').value) || 0;
          total = paystub1 + paystub2;
          average = total / 2;
          annual = average * 24;
          break;
        case 'verbal':
          verbalHours = parseFloat(document.getElementById('verbalHours').value) || 0;
          verbalRate = parseFloat(document.getElementById('verbalRate').value) || 0;
          total = verbalHours * verbalRate;
          average = total;
          annual = total * 52;
          break;
        default:
          return;
      }
      document.getElementById(`${type}Total`).textContent = total.toFixed(2);
      document.getElementById(`${type}Average`).textContent = average.toFixed(2);
      document.getElementById(`${type}Annual`).textContent = annual.toFixed(2);

      // Update the grand total
      calculateGrandTotal();
    }
    /***************************************************
     * 4) Summation of All Incomes
     ***************************************************/
     function calculateGrandTotal() {
  const biweeklyAnnual = parseFloat(document.getElementById('biweeklyAnnual').textContent) || 0;
  const weeklyAnnual = parseFloat(document.getElementById('weeklyAnnual').textContent) || 0;
  const twiceMonthAnnual = parseFloat(document.getElementById('twiceMonthAnnual').textContent) || 0;
  const verbalAnnual = parseFloat(document.getElementById('verbalAnnual').textContent) || 0;

  const weeklyTips = parseFloat(document.getElementById('AnnualTips').value) || 0;
  const annualTips = weeklyTips * 52;

  const otherMonthlyIncome = parseFloat(document.getElementById('AnnualOtherMonthly').value) || 0;
  const annualOtherMonthlyIncome = otherMonthlyIncome * 12;

  const otherAnnualIncome = parseFloat(document.getElementById('OtherAnnual').value) || 0;

  // ✅ Use 'let' so we can add to it later
  let grandTotal = biweeklyAnnual + weeklyAnnual + twiceMonthAnnual + verbalAnnual + annualTips + annualOtherMonthlyIncome + otherAnnualIncome;

  // ✅ Add incomes from household members
  const memberDivs = document.querySelectorAll('#householdMembersContainer > div');
  memberDivs.forEach((div, index) => {
    const incomeInput = div.querySelector('input[name^="memberIncome"]');
const freqSelect = div.querySelector('select[name^="memberFrequency"]');

    if (incomeInput && freqSelect && incomeInput.value) {
      const amount = parseFloat(incomeInput.value) || 0;
      let annual = 0;
      switch (freqSelect.value) {
        case 'weekly': annual = amount * 52; break;
        case 'biweekly': annual = amount * 26; break;
        case 'monthly': annual = amount * 12; break;
        case 'annually': annual = amount; break;
      }
      grandTotal += annual;
    }
  });

  document.getElementById('grandTotal').textContent = grandTotal.toFixed(2);

  // ✅ Trigger updates
  updateHouseholdIncome();
}

    /***************************************************
     * 5) Household Info (Coverage + AWC) Display
     ***************************************************/
     function updateHouseholdIncome() {
  const householdSize = parseInt(document.getElementById('householdSize').value) || 0;
  const yearlyIncome = parseFloat(document.getElementById('grandTotal').textContent) || 0;

  const coverageLevel = determineCoverageLevel(householdSize, yearlyIncome);
  document.getElementById('coverageLevel').textContent = coverageLevel;

  const awcQualification = determineAWCQualification(householdSize, yearlyIncome);
  document.getElementById('awcQualification').textContent = awcQualification;

  // ✅ Do NOT call updateHouseholdMemberFields() here to avoid infinite loop
}
function updateHouseholdMemberFields() {
  const container = document.getElementById('householdMembersContainer');
  const size = parseInt(document.getElementById('householdSize').value || 1);

  container.innerHTML = '';
  if (size <= 1) return;

  for (let i = 2; i <= size; i++) {
    const wrapper = document.createElement('div');
    wrapper.style.display = 'flex';
    wrapper.style.flexDirection = 'column';
    wrapper.style.gap = '10px';
    wrapper.style.marginBottom = '10px';

    const topRow = document.createElement('div');
    topRow.style.display = 'flex';
    topRow.style.gap = '10px';

    const select = document.createElement('select');
    select.name = `relationship${i}`;
    select.innerHTML = `
      <option value="">Select Relationship</option>
      <option>Child</option>
      <option>Grandchild</option>
      <option>Significant Other</option>
      <option>Fiancé</option>
      <option>Spouse</option>
      <option>Sibling</option>
      <option>Parent</option>      
      <option>Grandparent</option>
      <option>Friend</option>
      <option>Roommate</option>
      <option>Other</option>
    `;
    select.style.flex = '1';
    select.style.padding = '8px';
    select.style.borderRadius = '10px';

    const input = document.createElement('input');
    input.type = 'text';
    input.name = `name${i}`;
    input.placeholder = `Name of person ${i}`;
    input.style.flex = '2';
    input.style.padding = '8px';
    input.style.borderRadius = '10px';

    const plusBtn = document.createElement('button');
    plusBtn.type = 'button';
    plusBtn.textContent = '+';
    plusBtn.style.flex = '0 0 40px';
    plusBtn.style.borderRadius = '10px';
    plusBtn.style.backgroundColor = '#f8c9f9';
    plusBtn.style.border = '2px solid #f8c9f9';
    plusBtn.style.width = '130px';
    plusBtn.style.height = '40px';


    topRow.appendChild(select);
    topRow.appendChild(input);
    topRow.appendChild(plusBtn);

    const incomeSection = document.createElement('div');
    incomeSection.style.display = 'none';
    incomeSection.style.marginTop = '10px';
    incomeSection.innerHTML = `
      <label>Income Amount: <input type="number" step="0.01" name="memberIncome${i}" /></label>
      <label>Frequency:
        <select name="memberFrequency${i}">
          <option value="weekly">Weekly</option>
          <option value="biweekly">Biweekly</option>
          <option value="monthly">Monthly</option>
          <option value="annually">Annually</option>
        </select>
      </label>
    `;
// Add event listeners to recalculate when user changes inputs
const incomeInput = incomeSection.querySelector(`input[name="memberIncome${i}"]`);
const freqSelect = incomeSection.querySelector(`select[name="memberFrequency${i}"]`);

incomeInput.addEventListener('input', calculateGrandTotal);
freqSelect.addEventListener('change', calculateGrandTotal);

    incomeSection.querySelectorAll('input, select').forEach(el => {
      el.style.marginLeft = '10px';
      el.style.marginRight = '20px';
    });

    plusBtn.addEventListener('click', () => {
  incomeSection.style.display = (incomeSection.style.display === 'none') ? 'block' : 'none';
  calculateGrandTotal(); // Recalculate after revealing the field
});


    wrapper.appendChild(topRow);
    wrapper.appendChild(incomeSection);
    container.appendChild(wrapper);
  }
}

// Modal 1 functionality
const triggerModal1 = document.getElementById('triggerModal1');
const modalOverlay1 = document.getElementById('modalOverlay1');

triggerModal1.addEventListener('click', function() {
  modalOverlay1.style.display = 'flex';
});

modalOverlay1.addEventListener('click', function(e) {
  // Close if clicking outside the modal content
  if (e.target === modalOverlay1) {
    modalOverlay1.style.display = 'none';
  }
});

// Modal 2 functionality
const triggerModal2 = document.getElementById('triggerModal2');
const modalOverlay2 = document.getElementById('modalOverlay2');

triggerModal2.addEventListener('click', function() {
  modalOverlay2.style.display = 'flex';
});

modalOverlay2.addEventListener('click', function(e) {
  // Close if clicking outside the modal content
  if (e.target === modalOverlay2) {
    modalOverlay2.style.display = 'none';
  }
});

    /***************************************************
     * 6) Copy Button Function
     ***************************************************/
     function copyIncomeInfo() {
  const householdSize = document.getElementById('householdSize').value || "1";
  const yearlyIncome = document.getElementById('grandTotal').textContent || "0";
  const coverageLevel = document.getElementById('coverageLevel').textContent || "N/A";
  const awcQualification = document.getElementById('awcQualification').textContent || "N/A";
  const workingAt = document.getElementById('workingAt').value || "Unemployed";

  const incomeType = document.getElementById('incomeType').value;
  if (!incomeType) {
    alert("❌ Please select an Income Type before copying.");
    return;
  }

  let infoToCopy = `Income Type: ${incomeType}\nWorking @: ${workingAt}\nPeople in Household: ${householdSize}\n\n`;

  const membersSection = document.getElementById('householdMembersContainer');
const members = membersSection.children; // ✅ Only top-level divs

infoToCopy += "\n";
infoToCopy += "Members of Household (besides client):\n";
Array.from(members).forEach((member) => {
  const relationship = member.querySelector('select[name^="relationship"]')?.value || "N/A";
  const name = member.querySelector('input[name^="name"]')?.value || "N/A";
  const income = member.querySelector('input[name^="memberIncome"]')?.value || "";
  const freq = member.querySelector('select[name^="memberFrequency"]')?.value || "";

  infoToCopy += `- ${relationship}: ${name}\n`;

  if (income) {
    const val = parseFloat(income);
    let annual = 0;
    switch (freq.toLowerCase()) {
      case 'weekly': annual = val * 52; break;
      case 'biweekly': annual = val * 26; break;
      case 'monthly': annual = val * 12; break;
      case 'annually': annual = val; break;
      default: annual = val;
    }

    const formattedVal = `$${val.toLocaleString()}`;
    const formattedAnnual = `$${annual.toLocaleString(undefined, { minimumFractionDigits: 2 })}`;

    if (freq.toLowerCase() === 'annually') {
      infoToCopy += `   • Income: ${formattedAnnual} annually\n`;
    } else {
      infoToCopy += `   • Income: ${formattedVal} ${freq} (Annual: ${formattedAnnual})\n`;
    }
  }
});
infoToCopy += "\n";
  // Biweekly Income
  const biweeklyAnnual = parseFloat(document.getElementById('biweeklyAnnual').textContent) || 0;
  if (biweeklyAnnual !== 0) {
    const paystub1 = document.getElementById('paystub1').value || "0";
    const paystub2 = document.getElementById('paystub2').value || "0";
    const biweeklyTotal = document.getElementById('biweeklyTotal').textContent || "0";
    const biweeklyAverage = parseFloat(document.getElementById('biweeklyAverage').textContent) || 0;
    infoToCopy += 
`Biweekly Income:
  Paystub 1: $${paystub1}
  Paystub 2: $${paystub2}
  Total:     $${biweeklyTotal}
  Average:   $${biweeklyAverage.toFixed(2)}
  Annual:    $${biweeklyAnnual.toFixed(2)}

`;
  }

  // Weekly Income
  const weeklyAnnual = parseFloat(document.getElementById('weeklyAnnual').textContent) || 0;
  if (weeklyAnnual !== 0) {
    const weeklyPaystub1 = document.getElementById('weeklyPaystub1').value || "0";
    const weeklyPaystub2 = document.getElementById('weeklyPaystub2').value || "0";
    const weeklyTotal = document.getElementById('weeklyTotal').textContent || "0";
    const weeklyAverage = parseFloat(document.getElementById('weeklyAverage').textContent) || 0;
    infoToCopy += 
`Weekly Income:
  Paystub 1: $${weeklyPaystub1}
  Paystub 2: $${weeklyPaystub2}
  Total:     $${weeklyTotal}
  Average:   $${weeklyAverage.toFixed(2)}
  Annual:    $${weeklyAnnual.toFixed(2)}

`;
  }

  // Twice a Month Income
  const twiceMonthAnnual = parseFloat(document.getElementById('twiceMonthAnnual').textContent) || 0;
  if (twiceMonthAnnual !== 0) {
    const twiceMonthPaystub1 = document.getElementById('twiceMonthPaystub1').value || "0";
    const twiceMonthPaystub2 = document.getElementById('twiceMonthPaystub2').value || "0";
    const twiceMonthTotal = document.getElementById('twiceMonthTotal').textContent || "0";
    const twiceMonthAverage = parseFloat(document.getElementById('twiceMonthAverage').textContent) || 0;
    infoToCopy += 
`Twice a Month Income:
  Paystub 1: $${twiceMonthPaystub1}
  Paystub 2: $${twiceMonthPaystub2}
  Total:     $${twiceMonthTotal}
  Average:   $${twiceMonthAverage.toFixed(2)}
  Annual:    $${twiceMonthAnnual.toFixed(2)}

`;
  }

  // Weekly Verbal Income
  const verbalAnnual = parseFloat(document.getElementById('verbalAnnual').textContent) || 0;
  if (verbalAnnual !== 0) {
    const verbalHours = document.getElementById('verbalHours').value || "0";
    const verbalRate = document.getElementById('verbalRate').value || "0";
    const verbalTotal = document.getElementById('verbalTotal').textContent || "0";
    const verbalAverage = parseFloat(document.getElementById('verbalAverage').textContent) || 0;
    infoToCopy += 
`Weekly Verbal Income:
  Hours Worked: ${verbalHours}
  Hourly Rate:  $${verbalRate}
  Total:        $${verbalTotal}
  Average:      $${verbalAverage.toFixed(2)}
  Annual:       $${verbalAnnual.toFixed(2)}

`;
  }

  // Extra Income Section
  const tipsValue = document.getElementById('AnnualTips').value || "0";
  const tips = parseFloat(tipsValue) || 0;
  const otherMonthlyValue = document.getElementById('AnnualOtherMonthly').value || "0";
  const otherMonthly = parseFloat(otherMonthlyValue) || 0;
  const otherAnnualValue = document.getElementById('OtherAnnual').value || "0";
  const otherAnnual = parseFloat(otherAnnualValue) || 0;

  if (tips !== 0 || otherMonthly !== 0 || otherAnnual !== 0) {
    infoToCopy += "Extra Income:\n";
    if (tips !== 0) {
      let annualTips = tips * 52;
      infoToCopy += `  Tips per week: $${tips} (Annualized: $${annualTips.toFixed(2)})\n`;
    }
    if (otherMonthly !== 0) {
      let annualOtherMonthly = otherMonthly * 12;
      infoToCopy += `  Other Income per Month: $${otherMonthly} (Annualized: $${annualOtherMonthly.toFixed(2)})\n`;
    }
    if (otherAnnual !== 0) {
      infoToCopy += `  Other Annual Income: $${otherAnnual}\n`;
    }
  } // Close the "Extra Income Section" block properly

  infoToCopy += 
    `Yearly Income: $${yearlyIncome}\n` +
    `Client Pay: ${coverageLevel}\n` +
    `AWC! qualification: ${awcQualification} -If Applicable\n` +
    `Insurance:\n` +
    `${new Date().toLocaleString([], { hour: '2-digit', minute: '2-digit', year: 'numeric', month: '2-digit', day: '2-digit' })}\n` +
    `Staff: H\n`;
    const notes = document.getElementById('userNotes').value.trim();
if (notes) {
  infoToCopy += `\nAdditional Notes:\n${notes}\n`;
}

  navigator.clipboard.writeText(infoToCopy)
    .then(() => alert("Household info copied to clipboard!"))
    .catch(err => {
      console.error("Failed to copy text:", err);
      alert("Unable to copy info.");
    });
} // ✅ Correct closing of copyIncomeInfo()

    // Initialize everything on page load
    calculateGrandTotal();
document.getElementById('householdSize').addEventListener('change', () => {
  updateHouseholdMemberFields();
});

document.querySelectorAll('.toggleNotes').forEach(button => {
    button.addEventListener('click', () => {
        const notes = document.getElementById('notesContainer');
        notes.style.display = (notes.style.display === 'none' || notes.style.display === '') ? 'block' : 'none';
    });
});
  </script>
</body>
</html>